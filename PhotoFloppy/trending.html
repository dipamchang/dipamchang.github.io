
<!doctype html>
<html class="no-js">
<head>
<meta charset="utf-8">
<title>Photo Floppy - Trending Images</title>
<meta name="description" content="">
<meta name=viewport content="width=device-width, initial-scale=1">
<meta name="mobile-web-app-capable" content="yes">

<!-- build:css styles/vendor.css -->
<script src="/PhotoFloppy/static_assets/500px.js"></script>
<!-- bower:css -->
<link rel="stylesheet"
	href="/PhotoFloppy/static_assets/dist/semantic.min.css">
<!-- endbower -->
<!-- endbuild -->
<link
	href='//fonts.googleapis.com/css?family=Open+Sans:400,700,300&subset=latin,vietnamese'
	rel='stylesheet' type='text/css'>

<!-- build:css styles/main.css -->

<!-- endbuild -->
</head>
<body>

	<div class="ui purple inverted menu">
		<!-- 		<a class="item"> <img src="resources/trestor-logo-home.png"></a> -->
		<a class="item"><h2>[O]Floppy</h2></a> <a class="item" href="#">
			Home </a> <a class=" item" href="">Upload </a> <a class="active item"
			href=""> Trending </a>
		<!-- 		<a class=" item" href="https://trestor.org/faq"> FAQ's </a>  -->
		<!-- 		<a class=" item" href="https://trestor.org/app"> Download Wallet App</a> -->
		<div class="right menu" id="avatar"></div>
	</div>

	<div class="ui page grid ">
		<div class="row">
			<div class="column">
				<!-- 				<div class="ui large message"> -->
				<h2 class="ui dividing header">
					Trending Images<a class="anchor" id="types"></a>
				</h2>
				<!-- 				</div> -->
			</div>
		</div>

	</div>




	<div id="trendingImageGrid" class="ui page doubling three column grid">
	</div>

	<div class="ui page grid ">
		<div class="row">
			<div class="column">
				<div class="ui segment" id="loadMessage">
					<div class="ui active dimmer">
						<div class="ui text loader"></div>
					</div>
					<p>
						<h2 align="center">Fetching the latest Trending Photos ! hang On ! !
						</h2>
					</p>
				</div>
			</div>
		</div>
	</div>

	<!-- build:js scripts/vendor.js -->
						<!-- bower:js -->
	<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
	<script src="/PhotoFloppy/static_assets/dist/semantic.min.js"></script>
	<script src="/PhotoFloppy/static_assets/initiator.js"></script>
	<script type="text/javascript">
	$(document).ready(function(){
		_500px.init({
			sdk_key: '18b1f18f98ff6255e8000e1f655ce68ddb44c83d'
		});
		var me;
		var count = 1;
		_500px.on('authorization_obtained', function (status) {
			_500px.api('/users', function (response) {
				me = response.data.user;
				loadTrendingImages(count);
				$('#avatar').html('<a class="active item" ><img class="ui avatar image" src="'+me.userpic_url+'">'+me.username+'</a>');
			});
		});

		_500px.getAuthorizationStatus(function (status) {
			if (status == 'not_logged_in' || status == 'not_authorized') {
				_500px.login();
			}
		});


		$(window).scroll(function(){
			if  ($(window).scrollTop() == ($(document).height() - $(window).height())){
				count++;
				loadTrendingImages(count);
				
			}
		});
		
		function loadTrendingImages(pagenum){

			_500px.api('/photos', { feature: 'popular', page: pagenum, rpp: 9, image_size:3 }, function (response) {
				if (response.data.photos.length == 0) {
					$('#loadMessage').html('<p><h2 align="center">No more Images to load</h2></p>');
				} else {
					$.each(response.data.photos, function () {
						$('#trendingImageGrid').append('<div class="column"><div class="ui fluid purple card"><a href="photoInfo.html?id='+this.id+'" target="_blank" class="image"><img src="' + this.image_url + '" /></a><div class="content"><a class="header">' + this.name + '</a><a class="meta">' + this.user.username + '</a></div><div class="extra content"><span class="left floated like"> <i class="like icon"></i> ' + this.positive_votes_count + ' Likes</span><span class="right floated star"> <i class="star icon"></i> ' + this.favorites_count + ' Favorites</span></div></div></div>');
					});
				}
			});

		}
	});


</script>
	<!-- endbower -->
	<!-- endbuild -->

					</body>
</html>